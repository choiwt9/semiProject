<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>공지목록</title>
    
    
    <style>
        h3{text-align: center;}

table{
    border-spacing: 30px;
   width: 700px;
   height: 100%;
   margin: auto;
   
}

tr{background-color: rgb(222, 165, 230);}
    
td{
     width: 200px;
     height: 60px;
     min-width: 40px;
     border-radius: 10px; 
}

form {
    display: flex; /* Flexbox를 사용하여 가로로 배치 */
    align-items: center; /* 요소들을 수직 가운데 정렬 */
    justify-content: center; /* 요소들을 수평 가운데 정렬 */
    gap: 10px; /* 요소들 간의 간격 설정 */
}
.search-group {
        display: flex; /* 검색 입력창과 버튼을 하나의 그룹으로 만듦 */
        align-items: center;}

 #search, button{
        background-color: white;
        height: 40px; /* 동일한 높이 지정 */
        box-sizing: border-box; /* padding과 border를 포함해 크기 조절 */
        position: relative;
        }

 #search{
        border-top-left-radius: 10px;
        border-bottom-left-radius: 10px;
        display: inline-block;  
        border-right: none;
    }
 #numbers{ margin: 50px;
           display: flex;
            justify-content: center;
            flex-wrap: nowrap;  /* 한 줄로 유지 */
            gap: 10px; /* 페이지네이션 버튼 간의 간격 */
            white-space: nowrap;
           
       
 }
a{  
    font-size: larger;
    color: black;
    margin: 10px;
    border-radius: 5px;
       
 }

 #numbers>a:hover{
    background-color: black;
    color: white;
 }
 button{ position: relative;
        margin-left: 0px;
        border-top-right-radius: 10px;
        border-bottom-right-radius: 10px; 
        display: inline-block;
        padding: 0 10px;
        border-left: none;
     }
     img{width: 15px;
          height: 15px;
        cursor: pointer;
         }
         #gle{
            width: 60px;
            height: 40px;
            border-radius: 10px;
        }
    </style>
</head>
<body >
    <h3 >공지사항</h3>


    <div class="gong">
        <table id="announcementTable"></table>
     </div>

    </div>
<form action="">
    <div class="search-group">
    <input type="text" id="search" placeholder="검색">
    <button><img src="/free-icon-magnifier-2311526.png" ></button> 
    </div> 
    <div class="pagination" id="numbers">
        <a href="#" id="prev">&laquo; previous</a>  <!-- Previous page button -->
        <a href="#">1</a>
        <a href="#" id="next">next &raquo;</a>  <!-- Next page button -->
    </div>
    <input type="button" value="글쓰기" id="gle">
</form>
<script>

const announcements = JSON.parse(localStorage.getItem("announcements")) || [];
        const table = document.getElementById("announcementTable");
        const itemsPerPage = 8; // 한 페이지당 공지사항 개수
        let currentPage = 1; // 현재 페이지 번호
        const totalPages = Math.ceil(announcements.length / itemsPerPage);

        // 공지사항 표시 함수
        function displayAnnouncements(page) {
            table.innerHTML = ""; // 테이블 초기화

            const start = (page - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const paginatedAnnouncements = announcements.slice(start, end);

        for (let i = 0; i < paginatedAnnouncements.length; i += 2) {
            const row = document.createElement("tr");

            // 첫 번째 셀
            let cell1 = document.createElement("td");
            let link1 = document.createElement("a");
            let content1 = document.createElement("span");

            link1.href = `gongjiDetail.html?id=${paginatedAnnouncements[i].id}`;
            link1.textContent = `${paginatedAnnouncements[i].title}`;
            content1.className = "content";
            content1.textContent = shortenContent(paginatedAnnouncements[i].content, 20);

            cell1.appendChild(link1);
            cell1.appendChild(document.createElement("br"));
            cell1.appendChild(content1);
            row.appendChild(cell1);

            // 두 번째 셀 (i+1이 존재하는 경우)
            if (paginatedAnnouncements[i + 1]) {
                let cell2 = document.createElement("td");
                let link2 = document.createElement("a");
                let content2 = document.createElement("span");

                link2.href = `gongjiDetail.html?id=${paginatedAnnouncements[i + 1].id}`;
                link2.textContent = `${paginatedAnnouncements[i + 1].title}`;
                content2.className = "content";
                content2.textContent = shortenContent(paginatedAnnouncements[i + 1].content, 20);

                cell2.appendChild(link2);
                cell2.appendChild(document.createElement("br"));
                cell2.appendChild(content2);
                row.appendChild(cell2);
            } else {
                // 공지 개수가 홀수일 경우 빈 셀 추가
                const emptyCell = document.createElement("td");
                row.appendChild(emptyCell);
            }

            table.appendChild(row);
        }
        document.getElementById("pageNumber").textContent = currentPage; // 페이지 번호 업데이트
    }
     // 페이지네이션 동작
     document.getElementById("prev").addEventListener("click", function(event) {
            event.preventDefault();
            if (currentPage > 1) {
                currentPage--;
                displayAnnouncements(currentPage);
            }
        });

        document.getElementById("next").addEventListener("click", function(event) {
            event.preventDefault();
            if (currentPage < totalPages) {
                currentPage++;
                displayAnnouncements(currentPage);
            }
        });

    // 너무 긴 내용을 잘라내고 ...을 붙이는 함수
    function shortenContent(content, maxLength) {
        if (content.length > maxLength) {
            return content.substring(0, maxLength) + "...";
        } else {
            return content;
        }
    }

    // 모든 내용 span 요소에 대해 내용을 20자로 제한
    const contents = document.querySelectorAll(".content");
    contents.forEach(function(contentElement) {
        const originalText = contentElement.textContent;
        const shortenedText = shortenContent(originalText, 20);
        contentElement.textContent = shortenedText;
    });


    
</script>



</body>
</html>